fragment Token on Token {
  name
  symbol
  decimals
}

query InvestorTimeline($investor_address: String!, $first: Int = 1000, $skip: Int = 0) {
  clmPositions(skip: 0, first: 1000, where: { investor: $investor_address, managerBalance_gt: 0 }) {
    clm {
      address: id
      managerToken {
        ...Token
      }
      rewardPoolToken {
        ...Token
      }
      rewardToken {
        ...Token
      }
      underlyingToken0 {
        ...Token
      }
      underlyingToken1 {
        ...Token
      }
      managerTotalSupply
      rewardPoolTotalSupply
      token0ToNativePrice
      token1ToNativePrice
      rewardToNativePrice
      nativeToUSDPrice
    }
    managerBalance
    interactions(first: $first, skip: $skip, orderBy: timestamp, orderDirection: asc) {
      timestamp
      blockNumber
      createdWith {
        hash: id
      }
      type
      managerBalance
      rewardPoolBalance
      underlyingBalance0
      underlyingBalance1
      managerBalanceDelta
      rewardPoolBalanceDelta
      underlyingBalance0Delta
      underlyingBalance1Delta
      token0ToNativePrice
      token1ToNativePrice
      rewardToNativePrice
      nativeToUSDPrice
    }
  }
}
